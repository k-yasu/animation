<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>Mouse Distance</title>
	<link rel="stylesheet" href="../css/bootstrap.css">
</head>
<body>
<div id="header">
	<div class="navbar navbar-default navbar-static-top">
		<div class="container-fluid">
			<div class="navbar-header">
				<span class="navbar-brand">2点間の距離の取得</span>
			</div>
		</div>
	</div>
</div>
<div class="container">
	<canvas id="canvas" width="400" height="400"></canvas>
	<div class="commentary">
		//2点はx1、y1とx2、y2で表しいます<br>
		//対象の位置やマウスの座標値などで使用できます<br>
		dx = x2 - x1;<br>
		dy = y2 - y1;<br>
		dist = Math.sqrt(dx * dx + dy * dy);
	</div>
</div>
<textarea id="log"></textarea>
<pre>
	window.onload = function () {
		var canvas = document.getElementById('canvas');
		var context = canvas.getContext('2d');
		var mouse = utils.captureMouse(canvas);
		var log = document.getElementById('log');
		var rect = {
			x: canvas.width / 2,
			y: canvas.height / 2
		};

		(function drawFrame() {
			window.requestAnimationFrame(drawFrame);
			context.clearRect(0, 0, canvas.width, canvas.height);
			var dx = mouse.x - rect.x;
			var dy = mouse.y - rect.y;
			var dist = Math.sqrt(dx * dx + dy * dy);
			context.fillStyle = '#000000';
			context.fillRect(rect.x - 2, rect.y - 2, 4, 4);
			context.beginPath();
			context.moveTo(rect.x, rect.y);
			context.lineTo(mouse.x, mouse.y);
			context.closePath();
			context.stroke();
			log.value = "distance: " + dist;
		}());
	};
</pre>
<script src="../include/utils.js"></script>
<script>
	window.onload = function () {
		var canvas = document.getElementById('canvas');
		var context = canvas.getContext('2d');
		var mouse = utils.captureMouse(canvas);
		var log = document.getElementById('log');
		var rect = {
			x: canvas.width / 2,
			y: canvas.height / 2
		};

		(function drawFrame() {
			window.requestAnimationFrame(drawFrame);
			context.clearRect(0, 0, canvas.width, canvas.height);
			var dx = mouse.x - rect.x;
			var dy = mouse.y - rect.y;
			var dist = Math.sqrt(dx * dx + dy * dy);
			context.fillStyle = '#000000';
			context.fillRect(rect.x - 2, rect.y - 2, 4, 4);
			context.beginPath();
			context.moveTo(rect.x, rect.y);
			context.lineTo(mouse.x, mouse.y);
			context.closePath();
			context.stroke();
			log.value = "distance: " + dist;
		}());
	};
</script>
</body>
</html>
